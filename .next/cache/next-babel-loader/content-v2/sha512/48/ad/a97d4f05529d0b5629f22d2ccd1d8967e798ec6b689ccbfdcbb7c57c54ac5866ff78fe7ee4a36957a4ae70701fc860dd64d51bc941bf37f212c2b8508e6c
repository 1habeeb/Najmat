{"ast":null,"code":"import mongoose from 'mongoose';\n\nconst connectDB = handler => async (req, res) => {\n  if (mongoose.connections[0].readyState) {\n    // Use current db connection\n    return handler(req, res);\n  } // Use new db connection\n\n\n  await mongoose.connect(process.env.mongodburl, {\n    useUnifiedTopology: true,\n    useFindAndModify: false,\n    useCreateIndex: true,\n    useNewUrlParser: true\n  });\n  return handler(req, res);\n};\n\nexport default connectDB;","map":{"version":3,"sources":["/Users/i0h1m/Desktop/najmat-nextjs - - - DON'T/najmat with-mongodb/middleware/mongodb.js"],"names":["mongoose","connectDB","handler","req","res","connections","readyState","connect","process","env","mongodburl","useUnifiedTopology","useFindAndModify","useCreateIndex","useNewUrlParser"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,UAArB;;AAEA,MAAMC,SAAS,GAAGC,OAAO,IAAI,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AAC/C,MAAIJ,QAAQ,CAACK,WAAT,CAAqB,CAArB,EAAwBC,UAA5B,EAAwC;AACtC;AACA,WAAOJ,OAAO,CAACC,GAAD,EAAMC,GAAN,CAAd;AACD,GAJ8C,CAK/C;;;AACA,QAAMJ,QAAQ,CAACO,OAAT,CAAiBC,OAAO,CAACC,GAAR,CAAYC,UAA7B,EAAyC;AAC7CC,IAAAA,kBAAkB,EAAE,IADyB;AAE7CC,IAAAA,gBAAgB,EAAE,KAF2B;AAG7CC,IAAAA,cAAc,EAAE,IAH6B;AAI7CC,IAAAA,eAAe,EAAE;AAJ4B,GAAzC,CAAN;AAMA,SAAOZ,OAAO,CAACC,GAAD,EAAMC,GAAN,CAAd;AACD,CAbD;;AAeA,eAAeH,SAAf","sourcesContent":["import mongoose from 'mongoose';\n\nconst connectDB = handler => async (req, res) => {\n  if (mongoose.connections[0].readyState) {\n    // Use current db connection\n    return handler(req, res);\n  }\n  // Use new db connection\n  await mongoose.connect(process.env.mongodburl, {\n    useUnifiedTopology: true,\n    useFindAndModify: false,\n    useCreateIndex: true,\n    useNewUrlParser: true\n  });\n  return handler(req, res);\n};\n\nexport default connectDB;"]},"metadata":{},"sourceType":"module"}